<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickLearn AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>

<body>
    {% if session.get('user_id') %}
    <div class="header">
        <a href="{{ url_for('main.dashboard') }}" class="logo">QuickLearn ğŸš€</a>
        <div>
            <a href="{{ url_for('main.set_language', lang_code='en') }}"
                style="color:white; margin-right:10px; text-decoration:none;">EN</a>
            <a href="{{ url_for('main.set_language', lang_code='bm') }}"
                style="color:white; margin-right:10px; text-decoration:none;">BM</a>
            <a href="{{ url_for('auth.logout') }}" class="logout-btn">{{ t['logout'] }}</a>
        </div>
    </div>
    {% endif %}

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div
        style="text-align:center; padding: 15px; background: rgba(99, 102, 241, 0.2); color: white; border-bottom: 1px solid rgba(255,255,255,0.1);">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}

    <!-- Bottom Navigation -->
    {% if session.get('user_id') %}
    <nav class="bottom-nav">
        <a href="{{ url_for('main.dashboard') }}" class="nav-item">
            <span class="nav-icon">ğŸ </span>
            <span class="nav-label">Home</span>
        </a>
        <a href="{{ url_for('main.subjects_page') }}" class="nav-item">
            <span class="nav-icon">ğŸ“š</span>
            <span class="nav-label">Subjects</span>
        </a>
        <a href="{{ url_for('main.index') }}" class="nav-item nav-item-center">
            <span class="nav-icon-center">â–¶ï¸</span>
        </a>
        <a href="{{ url_for('quiz.history') }}" class="nav-item">
            <span class="nav-icon">ğŸ“Š</span>
            <span class="nav-label">History</span>
        </a>
        <a href="{{ url_for('main.settings') }}" class="nav-item">
            <span class="nav-icon">âš™ï¸</span>
            <span class="nav-label">Settings</span>
        </a>
    </nav>
    {% endif %}

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">
        <span id="theme-icon">ğŸŒ™</span>
    </button>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.getElementById('theme-icon').textContent = newTheme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
        }
        (function () {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('theme-icon').textContent = savedTheme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
        })();
    </script>
</body>

</html>